---
import IconClose from "~/assets/images/icons/close.svg";
import type { PresetBarProps as Props } from "~/types";

const { params } = Astro.props;

if (!params) return;

const allowedParams = [
	"make",
	"color",
	"price",
	"model",
	"condition",
	"fuelType",
	"transmission",
	"bodyType",
	"mileage",
	"year",
];

const paramLabels = {
	make: "Marca",
	model: "Modelo",
	price: "Precio",
	condition: "Condición",
	fuelType: "Tipo de combustible",
	transmission: "Transmisión",
	bodyType: "Tipo de carrocería",
	mileage: "Kilometraje",
	year: "Año",
	color: "Color",
};

const filteredParams = params.filter(([key]) => allowedParams.includes(key));
---

<div class="my-4 max-lg:overflow-x-scroll" style="scrollbar-width: none;">
	<ul class="flex lg:flex-wrap gap-2 flex-nowrap">
		{
			filteredParams.map(([key, value]: [string, string]) => (
				<li
					class="rounded-full bg-white lg:bg-gray-800 text-gray-800 lg:text-white px-2.5 py-1 text-xs lg:text-sm flex items-center gap-x-1 lg:gap-x-2 max-lg:opacity-90"
					data-preset-item
				>
					<button type="button" data-preset-key={key} data-preset-value={value}>
						<span class="sr-only">Remover filtro</span>
						<IconClose class="size-2.5 rounded-full bg-gray-800 lg:bg-white text-white lg:text-gray-800" />
					</button>
					<span>{paramLabels[key as keyof typeof paramLabels]}:</span>
					<span class="font-bold">{value}</span>
				</li>
			))
		}
	</ul>
</div>
